대본



1p

안녕하세요.  이번에 2조에서 발표을 맡게된  김연우라고 합니다. 저희 조는 CNN 기반 모델로 식물 및 식물병을 인식하고, 사용자에게 반려식물 관리 정보를 제공하는 서비스인 플랜트닥터를 개발하였습니다.



2p

구성원 및 역할은 다음과 같습니다.

목차는 프로젝트 기획 배경 및 목표, plant doctor 서비스 소개, 데이터, 딥러닝 모델 구현, 실제 서비스 구현, 사업화 및 기대효과, 발전방향 순으로 진행됩니다.



3p

첫번째로, 프로젝트 기획 배경 및 목표입니다.

5p

농촌진흥청에서 운영하는 농사로에 따르면, 최근 코로나 19로 인해 반려식물 키우기가 인기 취미로 떠오르고, 집에 있는 시간이 많아지면서 홈가드닝 관련 사업 매출이 내년에는 5000억원을 전망하고 있습니다.

6p 소비자의 니즈

더불어 10명 중 7명이 경험 했을 정도로 ‘코로나 우울증’을 많은 사람들이 겪고 있는데 

우울감, 활력 증가에 큰 도움을 주는 반려식물에 대한 관심이 증가하였으므로 이 프로젝트를 기획하게 되었습니다. 

 반려식물에 대한 관심도는 LG틔운, 교원등 가정용 식물 재배기의 인기를 통해 확인할 수 있었습니다. 



7p 시장조사 

다음은 시장조사입니다. 저희 팀원들은  국내 앱의 기능과 만족도 분석을 위해 PlantFit, PictureThis, PlantSnap 서비스를 직접 사용해 보았습니다.

세가지 서비스 모두 공통적으로 식물의 사진을 찍어 유사도를 판별하고, 식물 정보 조회가 가능하도록 기능이 구현 되어 있었습니다.

 각 서비스의 차별점으로는 PlantFit에서는 식물 구매와 물주기 기능 등 식물 관리의 전반적인 플랫폼을 제공하였고, PictureThis 서비스는 전문가의 조언을 받을 수 있는 기능이 있었습니다. PlantSnap 서비스는 반려식물 키우는 사람들끼리 커뮤니티를 형성할수 있었습니다.



8p 유사 서비스의 문제점

 하지만, 기존 앱들은 ‘구성이 복잡하고 직관적이지 않다, 인식 성능이 좋지 않다, 유료 서비스라서 실망했다, 앱을 사용하는데 불편함을 많이 느끼고 있다’ 는 리뷰가 대다수였습니다. 

 그래서 저희는 누구나 사용할 수 있도록 구성의 복잡함을 줄이고, 비회원도 다양한 기능을 체험 해 볼 수 있도록 하며, 리뷰를 꼼꼼하게 검토하여 앱의 사업성을 위한 기능도 추가로 도입할 수 있는 플랜트 닥터 서비스를 개발하기로 했습니다. 



9p 프로젝트 목표 

 기존의 서비스의 문제점 개선과 식물을 관리할 수 있는 플랫폼의 가치를 제공하기 위해 4가지의 목표를 가지고 진행하였습니다.

 첫번째, 식물 사진을 통해 어떤 식물인지를 인식하고 예측된 식물을 키우는 데에 필요한 정보를 제공하고자 합니다. 

두번째, 병해가 의심되는 식물을 인식하여 식물병을 예측하고, 예방법 정보를 제공하고자 합니다. 

세번째, 반려식물 등록 기능을 통해 식물의 종류에 따라 물주는 주기, 광도 등 맞춤형 관리 서비스를 제공하고 합니다.

 마지막으로 사용자의 위치 정보를 받아 해당 지역의 자외선 지수나 습도 등에 따른 관련 정보를 제공함으로써 반려식물을 손쉽게 관리할 수 있도록 구현하고자 하였습니다.



—-—- Part 2. 서비스 소개 —-—-

다음은 서비스 소개입니다.



11p

저희 플랜트닥터 서비스는 YOLOv5 모델을 활용하여 식물 및 식물병 인식 모델을 제공하고, 사용자들이 반려식물을 손쉽게 관리할 수 있도록, 식물 건강에 영향을 주는 정보를 제공하는 서비스입니다. 

반려식물을 처음 키우는 사람도 흥미롭게 이용할 수 있는 서비스로 , 

(페이지넘기기)

12p

반려식물에 대한 관심이 꾸준히 증가하고 있는 만큼, 반려식물을 키우는 모든 사람을 타겟으로 프로젝트를 진행하였습니다. 



13p

서비스 흐름도는 다음과 같습니다. (3초 있다가 ppt 넘기기)



14p

다음으로, 시스템 아키텍처입니다. 

저희는 웹크롤링과 API를 사용해 데이터를 수집했습니다. 크롤링한 학습용 이미지 데이터는 데이터 수가 많아 크기가 크고, DS 파트에서 딥러닝 모델을 돌릴 때 코랩을 사용하는 경우를 고려해 이미지 전달하는 방법으로 구글 드라이브를 선택했습니다.

식물 검색 기능에서 사용되는 식물별 대표 이미지, 그리고 날씨 아이콘은 이미지 크롤링 후 S3에 적재하여 파일 서버로 사용하였고, 파일 경로는 MySQL로 저장했습니다.

식물 정보와 병해 정보는 간단히 정제가 가능하여 MySQL에 바로 적재하였고, 그 중 식물 정보는 엘라스틱 서치에서 사용했습니다.

첫 화면에 나오는 날씨 및 지역 정보는 클라이언트가 접속할 때마다, API를 요청하는 것이 아닌 날씨를 바탕으로 회원들이 등록한 식물들의 적정 온도와 습도를 사용자의 환경에 맞게 제공해주기 위해 정제 후 DB에 적재하였습니다.

마지막으로, 에어플로우와 슬랙은 이 시스템의 전반적인 워크플로우를 관리하고, 모니터링 하는 데에 사용했습니다.



15p

플랜트닥터 서비스를 구현하는 데에 사용한 언어는 다음과 같습니다.

데이터 수집에 고언어를 사용한 이유는 DS 파트의 이미지 학습시간을 최대한 확보하고, 파이썬을 이용한 웹크롤링이 느리다는 단점을 해소하기 위해 사용했습니다.

스칼라는 데이터 정제를 위해 사용했는데요. 잘(jar)파일로 컴파일하여 Spark Submit 하였습니다.

파이썬은 장고, 에어플로우, 딥러닝을 하는 과정에서 사용했고, 쉘 스크립트는 프로세스들을 관리하는 데에 사용했습니다.





16ㅔ

 다음은 데이터 엔지니어링 파트입니다.

**17p** 

첫번째로, 데이터 수집에 대한 내용입니다. 

식물 인식에 사용 되는 데이터는 오늘의 집, 쿠팡, 11번가, 옥션 4가지 사이트에서 ‘실내 식물’을 검색 했을 때, 공통적으로 가장 많이 판매되는 식물 16가지로 선정하였습니다. 

식물병 인식에 사용 되는 데이터는 흰가루병, 노균병, 정상으로 총 25087개의 데이터를 AIhub에서 이미지 및 라벨링 데이터를 수집했습니다. 병해 선정 기준은 방금 전 식물 인식 16가지의 식물에서 가장 많이 걸리는 식물병 2가지로 선정하였습니다. 



식물 인식에 사용 되는 이미지 전처리는 중앙에 위치한 이미지 위주로 진행하였고, 식물병 인식에 사용되는 이미지는 노균병, 흰가루병, 정상에 해당하는 이미지 위주로 사용 할 수 있도록 전처리 하였습니다.



18p

다음은 위치 정보와, 날씨, 자외선 지수, 식물 검색에 사용 되는 데이터의 수집 정보 입니다. 

위치 정보는 geolocation 기술로 사용자의 현재 위치를 확인 한 후, kakao api를 요청해서 주소를 받아왔습니다. 

온도, 습도, 날씨, 시간별 기온, 자외선 지수 정보는 기상청 단기예보 조회 서비스 사이트에서 수집 하였습니다. 



식물 검색에 사용 된 식물은 약 250가지이고, 기존의 식물인식을 선정한 사이트에서 플립이라는 사이트를 추가하여 선정하였습니다. 식물에 대한 설명, 물주기, 햇빛, 온도, 습도에 관한 정보를 해당 사이트에서 크롤링하여 간단하게 오타 수정을 해 주었습니다. 



19p

플랜트 닥터 서비스의 ERD는 다음과 같습니다. 



—-—-—-part4. 딥러닝 모델 구현 —-—-—-

20P

다음은 식물인식과 식물병 인식에 사용 한 딥러닝 모델에 대해 설명하도록 하겠습니다.



21p

전체적인 분석 모형입니다.

사용자 식물 이미지와 병해 이미지를 32 배수 형태의 사이즈로 YOLOv5 모델에 input으로 들어갈 수 있게 설정한 후, Yolov5s 모델에 데이터를 학습 합니다. 인식 결과 엠에이피(mAP) 퍼센트와 클래스 이름이 나오게 되는 것을 확인할 수 있습니다.



22p

식물 인식 모델을 구현 할 때, CNN 기반 모델 중 가장 접근성이 좋은 ResNet50, Vgg16, yolov5 모델의 성능을 비교하여 93%로 가장 높은 성능을 보인 yolov5을 베이스라인 모델로 선정했습니다. 이 후 각 모델을 성능 개선하며 테스트 해 보았을 때도, Yolov5 모델이 성능이 가장 높게 나와서 yolov5 모델을 최종으로 사용하였습니다. 



23p

 Yolov5 모델을 사용할 때, 식물 이미지는 크롤링 한 데이터로 Annotation 라벨링 데이터의 부재 이슈가 있었습니다. 원래는 라벨링 생성 프로그램에서 직접 바운딩 박스를 그려줘야했지만 21805개의 이미지를 일일이 라벨링하기에 시간이 많이 소요되므로, 사용자가 식물을 화면 가운데에서 찍는다는 시나리오를 가정하여 임의로 바운딩 박스 좌표를 만들어줬습니다. 

 

24p

 Yolov5 모델로 에포크와 배치사이즈를 변화시키고, 식물의 종 수를 늘려서 테스트를 해 보았습니다. 그 결과, 베이스라인 모델 학습 결과인 94% 보다 식물 16가지로 학습시킨 모델이 96%로 더 좋은 성능을 가진것을 알 수 있었고, 최종 모델로 mAP가 96%인 모델로 선정하였습니다. 



25p

모델 학습 결과를 PR 곡선 그래프와 재현율, 정밀도, 엠에이피(mAP), f1 score 그래프로 확인해보았습니다. 엠에이피(map)의 경우 에포크 수가 50까지 늘어나면서 정확도는 계속해서 증가하는 모습을 확인할 수 있었고, PR커프는 우측 상단, F1 Score는 Confidence 레벨이 높아질수록 상위값에 머물고 있으므로 성능이 좋은 모델임을 확인할 수 있었습니다.



26p

다음은 식물병 인식 모델링에 대한 설명입니다. 식물인식 모델링과 동일한 방식으로 CNN 기반 모델 중 가장 접근성이 좋은 ResNet50, Vgg16, yolov5 모델의 성능을 비교하여 96%로 가장 높은 성능을 보인 yolov5를 베이스라인 모델로 선정했습니다. 이 후 각 모델을 성능 개선하며 테스트 해 보았을 때도, Yolov5 모델이 성능이 가장 높게 나와서 yolov5 모델을 최종으로 사용하였습니다.



27p

식물병 인식에서는 Aihub에 있는 노지작물 질병진단 데이터로 모델링을 진행하였는데, 이미지와 라벨 데이터 파일명이 모두 분류코드로 구성 되어 있었습니다. 그래서 작물코드와 질병코드는 흰가루병, 노균병 분류코드로 파일을 구분하였고, 병해가 잘 보이는 잎부분만 촬영한 분류코드로 파일을 다시 구분해 주었습니다. 



28p

 흰가루병, 노균병, 정상 파일을 분류한 후에, AIhub에 업로드 되어 있는 json 파일의 값을 추출하여 Yolov5 모델의 라벨 데이터 형식으로 데이터를 변환하여 파일을 다시 저장 해 주었습니다.



29p 

 Yolov5 모델을 배치사이즈와 에포크 수를 변경하면서 mAP@.5 값을 확인 해 본 결과, 배치사이즈 64, 에포크 50으로 두었을 때, mAP 0.948로 가장 좋은 성능을 보이는 것을 알 수 있었고, 해당 모델을 최종모델로 선정하게 되었습니다. 



30p

모델 학습 결과를 PR 곡선 그래프와 재현율, 정밀도, 엠아이피(mAP), f1 score 그래프로 확인해보았습니다. 엠아이피(map)의 경우 에포크 수가 50까지 늘어나면서 정확도는 계속해서 증가하는 모습을 확인할 수 있었고, PR커프는 우측 상단, F1 Score는 Confidence 레벨이 높아질수록 상위값에 머물고 있으므로 성능이 좋은 모델임을 확인할 수 있었습니다.



—-—-—-part5. 서비스 구현 —-—-—--—--—--—-

홈화면을 보게 되면 식물성장에 관련된 정보들이 나오게 되고, 식물이 없을때 식물을 추가하세요 라는 문구가 나오게 됩니다.

로그인은 카카오 소셜로그인이 가능하며, 로그인을 하게 되면 나의 식물을 추가할수 있습니다. 추가적으로 식물에 관한 정보를 받고 싶다면 식물 추가 요청을 통해 저희가 추가적으로 반영할수있습니다. 식물인식과 식물병인식은 파일, 갤러리, 카메라에서 관련 정보를 가져와 



31p

서비스 시연 전에 주요 기능을 간단히 소개해드리겠습니다.



32p

먼저 메인 화면에서는 사용자 위치 정보를 받아 각자의 환경에 맞게 식물에게 영향을 주는 정보를 제공합니다. 그리고 '언제 물주지?' 기능에서는 물을 줘야하는 식물 정보를 디데이와 함께 표시했습니다.



33p

나의 식물 관리에서는 등록된 식물이 있으면 식물 별명, 종, 함께한 날, 물주기 D-Day 정보가 출력됩니다. 물주기, 식물정보 기능을 제공하고, 삭제 버튼을 누르면 해당 식물을 삭제합니다. 식물을 직접 등록하고 싶은 경우, 우측 상단의 '식물 추가' 버튼을 활용할 수 있습니다.



34p

식물 추가 버튼을 클릭하면 몇 가지 정보를 입력함으로써 내 식물로 추가할 수 있고, '식물 종류'에 등록되지 않은 식물의 경우, 우측 상단의 식물 추가 요청 버튼을 클릭하면 사용자의 요구를 반영하여 식물 종류를 추가적으로 제공해줍니다.



35p

다음으로, 플랜트 닥터의 핵심 기능인 식물 인식과 식물병 인식 기능입니다. 식물 인식 기능은 카메라로 촬영 혹은 갤러리에서 사진을 불러와 어떤 식물인지 인식하고 해당 식물과 관련된 정보를 불러옵니다.

식물병 인식 기능도 이미지를 인식한 후, 식물병에 걸렸을 경우 해당 식물병에 관한 정보와 예방법 정보를 제공합니다.



36p

식물 검색 기능에서는 식물 이름을 검색하면 해당 식물의 종류별로 선택지를 제공합니다.

검색을 하는 과정에서 사용자의 편의성을 높이기 위해 자동완성 기능을 추가하여 일부 검색어만 입력하더라도 정확한 정보를 제공하고, 자음, 영어, 오타로 검색하더라도 비슷한 식물명을 가진 정보를 모두 제공합니다.

식물을 검색하고나면, 식물의 종류를 보여주고 종류를 선택하면 해당 식물에 대한 상세 정보를 제공합니다.



37p

마지막으로, 이 서비스는 회원/비회원 모두가 사용할 수 있도록 회원가입, 로그인 기능을 추가하였습니다. 그리고 카카오 소셜 로그인을 추가하여 로그인에 있어서도 사용자가 부담을 느끼지 않도록 서비스를 제공했습니다.



38p

웹에서 화면공유를 하기 때문에 식물 및 식물병 인식만 시연 영상을 보여드리겠습니다.

—-—-—-part6. 사업화 및 기대효과 —-—-—--—-



39p

마지막으로 사업화 및 기대효과입니다.



40p

저희 서비스를 통해 사업화를 생각해보았을 때, 식물 또는 관련된 제품을 구매할 수 있도록 식물 구매 서비스와 식물병을 치료할 수 있는 사이트나 관련 제품을 구매할 수 있는 하단 링크 광고, 혹은 노출 광고를 통해 수익을 낼 수 있는 플랜트닥터 서비스를 통해 사업화시킬 수 있습니다.



41p

서비스 기대효과로는 크게 4가지를 생각할 수 있습니다.

소비자의 입장에서 식물을 건강하게 키울 수 있는 유용한 정보를 제공하고, 식물병에 관한 정보를 제공해줌으로써, 식물병을 사전에 예방할 수 있으며, 반려식물 별로 물주는 날짜를 쉽게 간편하게 관리할 수 있습니다.

이러한 플랜트 닥터의 기능들을 통해 코로나 19로 인해 스트레스가 많은 현대인들에게 활력을 줄 수 있습니다.



42p 

마지막으로 플랜트 닥터 서비스의 한계점과 발전방향에 대해 말씀드리겠습니다.

플랜트닥터 서비스를 개발하는 과정에서 이미지 데이터 전처리에 시간이 많이 소요되어 식물 종류를 더 늘리지 못하고, 모델링에 더 많은 디벨롭을 시도해보지 못했다는 점에서 아쉬웠습니다.

그래서 앞으로 서비스를 디벨롭 할 기회가 있다면, 사용자들의 사진을 '재학습'에 사용하여 모델의 성능을 계속해 디벨롭할 수 있도록 시도해보고 싶습니다.

또한, 초기 계획과는 달리, 반응형 웹으로 마무리하게 된 점도 보완하여, 앱으로 구현하고, 더 많은 기술을 도입해보고 싶습니다.



—-—-—-Appendix. 참고자료, 느낀점 —-—-—-

44~45p

참고자료 및 느낀점입니다.



46p

질문이 있으신 분들은 질문해주세요!



지금까지 발표를 들어주셔서 감사합니다.